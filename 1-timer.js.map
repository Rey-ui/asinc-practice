{"version":3,"file":"1-timer.js","sources":["../src/js/timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst inputEl = document.getElementById('datetime-picker');\nconst btnEl = document.querySelector('button[data-start]');\nconst daysEl = document.querySelector('span[data-days]');\nconst hoursEl = document.querySelector('span[data-hours]');\nconst minutesEl = document.querySelector('span[data-minutes]');\nconst secondsEl = document.querySelector('span[data-seconds]');\nlet selectedDate;\nlet timerId;\nbtnEl.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    selectedDate = selectedDates[0];\n    if (Number(new Date()) > Number(selectedDate)) {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'You forgot important data',\n      });\n      updateTimerDisp(null);\n      return;\n    }\n    btnEl.disabled = false;\n    clearInterval(timerId);\n    chekDate(selectedDate);\n\n    console.log(selectedDates[0]);\n  },\n};\nflatpickr(inputEl, options);\nbtnEl.addEventListener('click', () => {\n  timerId = setInterval(() => {\n    chekDate(selectedDate);\n  }, 1000);\n  btnEl.disabled = true;\n});\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction updateTimerDisp(userSelectedDate) {\n  if (\n    !userSelectedDate ||\n    isNaN(userSelectedDate) ||\n    userSelectedDate == null\n  ) {\n    daysEl.textContent = '00';\n    hoursEl.textContent = '00';\n    minutesEl.textContent = '00';\n    secondsEl.textContent = '00';\n  } else {\n    const { days, hours, minutes, seconds } = convertMs(userSelectedDate);\n    daysEl.textContent = String(days).padStart(2, '0');\n    hoursEl.textContent = String(hours).padStart(2, '0');\n    minutesEl.textContent = String(minutes).padStart(2, '0');\n    secondsEl.textContent = String(seconds).padStart(2, '0');\n  }\n}\nfunction chekDate(userSelectedDate) {\n  const currentDate = new Date();\n  if (\n    !userSelectedDate ||\n    isNaN(userSelectedDate) ||\n    userSelectedDate == null\n  ) {\n    clearInterval(timerId);\n    updateTimerDisp(null);\n    btnEl.disabled = true;\n  } else {\n    const res = Number(userSelectedDate) - Number(currentDate);\n    updateTimerDisp(res);\n  }\n}\n"],"names":["inputEl","btnEl","daysEl","hoursEl","minutesEl","secondsEl","selectedDate","timerId","options","selectedDates","iziToast","updateTimerDisp","chekDate","flatpickr","convertMs","ms","days","hours","minutes","seconds","userSelectedDate","currentDate","res"],"mappings":"0FAIA,MAAMA,EAAU,SAAS,eAAe,iBAAiB,EACnDC,EAAQ,SAAS,cAAc,oBAAoB,EACnDC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAY,SAAS,cAAc,oBAAoB,EAC7D,IAAIC,EACAC,EACJN,EAAM,SAAW,GAEjB,MAAMO,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErB,GADAH,EAAeG,EAAc,CAAC,EAC1B,OAAO,IAAI,IAAM,EAAI,OAAOH,CAAY,EAAG,CAC7CI,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,2BACjB,CAAO,EACDC,EAAgB,IAAI,EACpB,MACD,CACDV,EAAM,SAAW,GACjB,cAAcM,CAAO,EACrBK,EAASN,CAAY,EAErB,QAAQ,IAAIG,EAAc,CAAC,CAAC,CAC7B,CACH,EACAI,EAAUb,EAASQ,CAAO,EAC1BP,EAAM,iBAAiB,QAAS,IAAM,CACpCM,EAAU,YAAY,IAAM,CAC1BK,EAASN,CAAY,CACtB,EAAE,GAAI,EACPL,EAAM,SAAW,EACnB,CAAC,EACD,SAASa,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASR,EAAgBS,EAAkB,CACzC,GACE,CAACA,GACD,MAAMA,CAAgB,GACtBA,GAAoB,KAEpBlB,EAAO,YAAc,KACrBC,EAAQ,YAAc,KACtBC,EAAU,YAAc,KACxBC,EAAU,YAAc,SACnB,CACL,KAAM,CAAE,KAAAW,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUM,CAAgB,EACpElB,EAAO,YAAc,OAAOc,CAAI,EAAE,SAAS,EAAG,GAAG,EACjDb,EAAQ,YAAc,OAAOc,CAAK,EAAE,SAAS,EAAG,GAAG,EACnDb,EAAU,YAAc,OAAOc,CAAO,EAAE,SAAS,EAAG,GAAG,EACvDb,EAAU,YAAc,OAAOc,CAAO,EAAE,SAAS,EAAG,GAAG,CACxD,CACH,CACA,SAASP,EAASQ,EAAkB,CAClC,MAAMC,EAAc,IAAI,KACxB,GACE,CAACD,GACD,MAAMA,CAAgB,GACtBA,GAAoB,KAEpB,cAAcb,CAAO,EACrBI,EAAgB,IAAI,EACpBV,EAAM,SAAW,OACZ,CACL,MAAMqB,EAAM,OAAOF,CAAgB,EAAI,OAAOC,CAAW,EACzDV,EAAgBW,CAAG,CACpB,CACH"}